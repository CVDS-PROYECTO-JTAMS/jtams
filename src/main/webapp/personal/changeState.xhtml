<!DOCTYPE html>
<html xmlns="http://www.w3c.org/1999/xhtml"
	  xmlns:h="http://xmlns.jcp.org/jsf/html"
	  xmlns:p="http://primefaces.org/ui"
	  xmlns:f="http://java.sun.com/jsf/core"
	  xmlns:ui="http://java.sun.com/jsf/facelets"
	  lang="es">

  <title>Reserva de Recursos ECI</title>
  <h:head>
	  <style>
		table, th, td {
		  border: 3px solid black;
		  border-collapse: collapse;
		}
		th, td {
		  padding: 20px;
		  text-align: left;
		}
		div.background {
		  border: 0.5px solid black;
		}

		div.transbox {
		  margin: 30px;
		  background-color: #00366E;
		  border: 1px solid black;
		  opacity: 0.6;
		}

		div.transbox p {
		  margin: 5%;
		  font-weight: bold;
		  color: #ffffff;
		  text-align: center;
		}
		</style>


	  <!-- FRAMEWORK BOOTSTRAP para el estilo de la pagina-->
	  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"/>
	  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>

	  <!-- Los iconos tipo Solid de Fontawesome-->
	  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.8/css/solid.css"/>
	  <script src="https://use.fontawesome.com/releases/v5.0.7/js/all.js"></script>

	  <!-- Nuestro css-->
	  <link rel="stylesheet" type="text/css" href="/css/indexEci.css" >
	  </link>

	  <div class="background">
		  <div class="transbox">
			  <p>PERSONAL</p>
		  </div>
	  </div>
  </h:head>
  <h:body>
  <center>
	<header>
        <h:form>
            <p:tabMenu activeIndex="1">
                <p:menuitem value="Consultar Iniciativas" outcome="searchInitiativePersonal.xhtml" icon="ui-icon-document"/>
                <p:menuitem value="Cambiar Estado de iniciativa" outcome="changeState.xhtml" icon="ui-icon-document"/>
                <p:menuitem value="Consultar Iniciativas por estado" outcome="searchInitiativeStatusPersonal.xhtml" icon="ui-icon-document"/>
                <p:menuitem value="Salir" action="#{LoginBean.logout}" icon="ui-icon-close" style="position: absolute; left: 950px;"/>
            </p:tabMenu>
        </h:form>
            <br/><br/>
            <center>
                <h1 style="color:white">Seleccione la Iniciativa para cambiar estado</h1>

                    <p:dataTable id="tablaIniciativa" var="initiative" value="#{InitiativeBean.Todasiniciativas()}" selectionMode="single"
                    selection="#{InitiativeBean.selectedInitiative}" rowKey="#{initiative.id}" paginator="true"  rows="10"
                    paginatorTemplate="{CurrentPageReport} {PreviousPageLink} {PageLinks}  {LastPageLink} {RowsPerPageDropdown}"
                         currentPageReportTemplate="{startRecord}-{endRecord} de {totalRecords} guardadas" rowsPerPageTemplate="5,10,15,20">>
                        <p:column headerText="Id" style="width:30px" >
                            <h:outputText value="#{initiative.id}" />
                        </p:column>
                        <p:column headerText="Descripcion" style="width:260px" >

                            <h:outputText value="#{initiative.description}" align="left"/>

                        </p:column>
                        <p:column headerText="Area" style="width:140px">
                            <h:outputText value="#{initiative.area}" />
                        </p:column>
                        <p:column headerText="Fecha de creacion" style="width:270px">

                            <h:outputText value="#{initiative.creationDate}" />

                        </p:column>

                        <p:column headerText="Estado" style="width:180px">
                         <center>
                            <h:outputText value="#{initiative.typeStatusId}" />
                             </center>
                        </p:column>


                        <p:column headerText="# de Votos" style="width: 70px" >
                         <center>
                            <h:outputText value="#{initiative.numVotes}" />
                            </center>
                        </p:column>

                        <f:facet name="footer">
                        <h:selectOneMenu id="initiative_estado" value="#{InitiativeBean.statusToUpdate}">
                        <f:selectItem itemLabel="En espera revison" itemValue="En espera revison" />
                        <f:selectItem itemLabel="En Revision" itemValue="En Revision" />
                        <f:selectItem itemLabel="Aceptada" itemValue="Aceptada" />
                        <f:selectItem itemLabel="Declinada" itemValue="Declinada" />
                    </h:selectOneMenu>
                     <h:commandButton style="width: 90px" value="Aplicar" id="modificar"   actionListener="#{InitiativeBean.updateStatusInitiative()}" update=":tablaIniciativa" ajax="true" />
                    </f:facet>
                    </p:dataTable>
                     </center>
	</header>
  </center>
  </h:body>

 

 


 
</html>
