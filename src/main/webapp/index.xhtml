<!DOCTYPE html>
<html xmlns="http://www.w3c.org/1999/xhtml"
xmlns:h="http://xmlns.jcp.org/jsf/html"
xmlns:p="http://primefaces.org/ui"
xmlns:th="http://www.thymeleaf.org"
lang="es">

  <title>Reserva de Recursos ECI</title>
  <head>
	  <!--JQUERY-->
	  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

	  <!-- FRAMEWORK BOOTSTRAP para el estilo de la pagina-->
	  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"/>
	  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>

	  <!-- Los iconos tipo Solid de Fontawesome-->
	  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.8/css/solid.css"/>
	  <script src="https://use.fontawesome.com/releases/v5.0.7/js/all.js"></script>

	  <!-- Nuestro css-->
	  <link rel="stylesheet" type="text/css" href="/css/indexEci.css" >
	  </link>

  </head>
  <body>
  <div class="modal-dialog text-center">
    <div class="col-sm-8 main-section">
        <div class="modal-content">
            <div class="col-12 user-img">
	            <img src="img/user.png" th:src="@{/img/user.png}"/>
            </div>

	<h:form>
			<p:outputPanel>
                <div class="form-group" id="user-group">
                <center>
                <p:inputText id="userInput"  style="width:150px" class="form-control" data-validation-required-message="Please enter your username." placeholder="Ingresa tu email" value="#{userBean.username}"/>
                </center>
                </div>
            </p:outputPanel>
			 <p:outputPanel>
                 <div class="form-group" id="contrasena-group">
                 <center>
                 <p:inputText type="password" class="form-control" data-validation-required-message="Please enter your password." id="passwordInput" style="width:150px" placeholder="Ingresa tu contrasena" value="#{userBean.password}"/>
                 </center>
                 </div>
             </p:outputPanel>
            <center>
			<p:commandButton id="ingresar" action="#{userBean.logIn}" class="btn btn-primary"  value="Ingresar"  />
            </center>


	</h:form>

           
  			</div>
  		</div>
  </div>
  <center>
  <h1 style="color:white;">Ultimas Iniciativas Agregadas</h1>
                <p:dataTable var="initiative" value="#{InitiativeBean.Todasiniciativas()}"   style="margin-bottom:20px"  >
                    <p:column headerText="Id" style="color:white; width:30px; height:35px" >
                        <h:outputText value="#{initiative.id}" />
                    </p:column>
                    <p:column headerText="Descripcion" style="color:white;width:180px; height:35px" >
                     
                        <h:outputText value="#{initiative.description}" align="left"/>
                        
                    </p:column>
                    <p:column headerText="Area" style="color:white;width:120px; height:35px">
                        <h:outputText value="#{initiative.area}" />
                    </p:column>
                    <p:column headerText="Fecha de creacion" style="color:white;width:230px; height:35px">
                    
                        <h:outputText value="#{initiative.creationDate}" />
                        
                    </p:column>
                    
                    <p:column headerText="Estado" style="color:white;width:120px; height:35px">
                        <h:outputText value="#{initiative.typeStatusId}" />
                    </p:column>
                    
                    
                    <p:column headerText="# de Votos" style="color:white" >
                     <center>
                        <h:outputText value="#{initiative.numVotes}" />
                        </center>
                    </p:column>
                </p:dataTable>
                 </center>
                	
 </body>  
                <br/><br/>

                <h2 style="color:white;">Busqueda de iniciativas por palabras clave</h2>
                <h:form>
                    <input id="ejemplo" type="text" value="ingrese palabra " data-role="tagsinput" style="width:200px; height:35px" />
                    <p:inputText id="palabra" binding="#{palabraclave}" type="hidden"  />
                    <p:commandButton id="buscar_keyword" value = "Buscar" update=":tabla_iniciativas" action="#{InitiativeBean.buscainiciativa(palabraclave.value)}" style="width:70px; height:35px"></p:commandButton>
                </h:form>
                <br></br>

                <p:dataTable id="tabla_iniciativas" var="initiative" iniciativa="#{InitiativeBean.buscainiciativa(palabraclave.value)}">
                    <p:column headerText="Id" style="color:white;">
                        <h:outputText iniciativa="#{initiative.id}" />
                    </p:column>
                    <p:column headerText="Descripcion" style="color:white;">
                        <h:outputText iniciativa="#{initiative.description}" />
                    </p:column>
                    <p:column headerText="Area" style="color:white;">
                        <h:outputText iniciativa="#{initiative.area}" />
                    </p:column>
                    <p:column headerText="Estado" style="color:white;">
                        <h:outputText iniciativa="#{initiative.typeStatusId}" />
                    </p:column>
                    <p:column headerText="Fecha de creacion" style="color:white;">
                        <h:outputText iniciativa="#{initiative.creationDate}" />
                    </p:column>
                    <p:column headerText="# de votos" style="color:white;">
                        <h:outputText iniciativa="#{initiative.numVotes }" />
                    </p:column>
                </p:dataTable>
  
  
</html>
